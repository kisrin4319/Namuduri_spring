<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="efeelog">
	
	<sql id="select-bookall">
		SELECT * FROM EFEELOG
	</sql>
	
	<!-- efeelog 작성 -->
	<insert id="efwrite" parameterType="EFeelogModel">
		INSERT INTO EFEELOG (
		MEMBER_ID,
		BOOK_IMAGE,
		BOOK_NAME,
		BOOK_MEMO,
		EFEELOG_REGDATE
		) VALUES (
		#{member_id},
		#{book_image},
		#{book_name},
		#{book_memo},
		#{efeelog_regdate}
		)
	</insert>
	
	<!-- 도서 검색 -->
	<select id="efeelogSearch" parameterType="map" resultType="EFeelogModel">
		<include refid="select-bookall"/>
		<choose>
			<when test="searchNum == 1">
				WHERE BOOK_NAME like '%'||#{searchKeyword}||'%'
			</when>
		</choose>	
	</select>
	
</mapper>